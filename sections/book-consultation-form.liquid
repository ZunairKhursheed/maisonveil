{% comment %}
  Book Consultation Form Section
  Allows customers to book consultations through a contact form
{% endcomment %}



<section 
  id="BookConsultationForm-{{ section.id }}" 
  class="section section-{{ section.id }}-padding"
  style="background-color: #ffffff; padding: 5rem 0;"
>
  <div class="page-width">
    <div class="section-{{ section.id }}-padding">
      
      {% if section.settings.heading != blank %}
        <div class="title-wrapper-with-link title-wrapper--self-padded-mobile title-wrapper--no-top-margin">
          <h2 class="title">{{ section.settings.heading }}</h2>
          {% if section.settings.subheading != blank %}
            <p class="subtitle">{{ section.settings.subheading }}</p>
          {% endif %}
        </div>
      {% endif %}

      <div class="contact-form" style="background-color: #f8f9fa; padding: 3rem; border-radius: 0.8rem; margin-top: 2rem;">
        {% if section.settings.description != blank %}
          <div class="contact-form__description" style="margin-bottom: 2rem; text-align: center;">
            {{ section.settings.description }}
          </div>
        {% endif %}

        {% form 'contact', id: 'BookConsultationForm', class: 'contact-form' %}
          {% if form.posted_successfully? %}
            <div class="form-status form-status--success" tabindex="-1" autofocus>
              <h3 class="form-status__title">Thank you!</h3>
              <p>We've received your consultation request and will get back to you within 24 hours.</p>
            </div>
          {% endif %}

          {% if form.errors %}
            <div class="form-status form-status--error">
              <h3 class="form-status__title">Please correct the following errors:</h3>
              <ul>
                {% for field in form.errors %}
                  <li>
                    {% if field == 'form' %}
                      {{ form.errors.messages[field] }}
                    {% else %}
                      {{ form.errors.translated_fields[field] | capitalize }} {{ form.errors.messages[field] }}
                    {% endif %}
                  </li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}

          <input type="hidden" name="contact[subject]" value="Consultation Request">
          
          <div class="contact__fields" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
            <div class="field">
              <input
                class="field__input"
                autocomplete="name"
                type="text"
                id="BookConsultationForm-name"
                name="contact[name]"
                required
                value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
                placeholder="Enter your full name"
              >
              <label class="field__label" for="BookConsultationForm-name">
                Full Name <span aria-hidden="true">*</span>
              </label>
            </div>
            <div class="field">
              <input
                autocomplete="email"
                type="email"
                id="BookConsultationForm-email"
                class="field__input"
                name="contact[email]"
                required
                spellcheck="false"
                autocapitalize="off"
                value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
                aria-required="true"
                placeholder="Enter your email address"
              >
              <label class="field__label" for="BookConsultationForm-email">
                Email Address <span aria-hidden="true">*</span>
              </label>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
            <div class="field">
              <input
                type="tel"
                id="BookConsultationForm-phone"
                class="field__input"
                autocomplete="tel"
                name="contact[phone]"
                pattern="[0-9\-]*"
                value="{% if form.phone %}{{ form.phone }}{% endif %}"
                placeholder="Enter your phone number"
              >
              <label class="field__label" for="BookConsultationForm-phone">Phone Number</label>
            </div>
            <div class="field">
              <select id="BookConsultationForm-service" class="field__input" name="contact[service]">
                <option value="">Select a service</option>
                {% for service in section.settings.services %}
                  <option value="{{ service }}">{{ service }}</option>
                {% endfor %}
              </select>
              <label class="field__label" for="BookConsultationForm-service">Service Type</label>
            </div>
          </div>
          <div class="field" style="margin-bottom: 2rem;">
            <input
              type="date"
              id="BookConsultationForm-preferred-date"
              class="field__input"
              name="contact[preferred_date]"
              min="{{ 'now' | date: '%Y-%m-%d' }}"
              value="{% if form.preferred_date %}{{ form.preferred_date }}{% endif %}"
            >
            <label class="field__label" for="BookConsultationForm-preferred-date">Preferred Date</label>
          </div>
          <div class="field" style="margin-bottom: 2rem;">
            <textarea
              rows="10"
              id="BookConsultationForm-message"
              class="text-area field__input"
              name="contact[body]"
              placeholder="Tell us about your style goals, preferences, or any specific questions you have..."
            >{% if form.body %}{{ form.body }}{% endif %}</textarea>
            <label class="form__label field__label" for="BookConsultationForm-message">
              Additional Information
            </label>
          </div>
          {% if section.settings.show_privacy_notice %}
            <div class="field" style="margin-bottom: 2rem;">
              <label class="field__label">
                <input type="checkbox" required>
                {{ section.settings.privacy_notice_text | default: 'I agree to the Privacy Policy and consent to my data being used to contact me about this consultation.' }}
              </label>
            </div>
          {% endif %}
          <div class="contact__button" style="text-align: center;">
            <button type="submit" class="button">
              {{ section.settings.button_text | default: 'Book Consultation' }}
            </button>
          </div>
        {% endform %}
      </div>
    </div>
  </div>
</section>



{% schema %}
{
  "name": "Book Consultation Form",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Book a Consultation"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Schedule your personalized consultation with our experts"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Fill out the form below and we'll get back to you within 24 hours to schedule your consultation.</p>"
    },
    {
      "type": "textarea",
      "id": "services",
      "label": "Available Services",
      "info": "Add one service per line",
      "default": "Personal Styling\nWardrobe Consultation\nColor Analysis\nShopping Service\nSpecial Event Styling"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Book Consultation"
    },
    {
      "type": "header",
      "content": "Privacy"
    },
    {
      "type": "checkbox",
      "id": "show_privacy_notice",
      "label": "Show Privacy Notice",
      "default": true
    },
    {
      "type": "richtext",
      "id": "privacy_notice_text",
      "label": "Privacy Notice Text",
      "default": "<p>I agree to the <a href=\"/pages/privacy-policy\">Privacy Policy</a> and consent to my data being used to contact me about this consultation.</p>"
    },

  ],
  "presets": [
    {
      "name": "Book Consultation Form"
    }
  ]
}
{% endschema %} 